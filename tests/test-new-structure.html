<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test New Structure</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        canvas { max-width: 100%; height: 300px; }
    </style>
</head>
<body>
    <h1>üß™ Testing New Modular Structure</h1>
    
    <div class="test-section">
        <h2>üìÅ File Structure Test</h2>
        <div id="structure-test"></div>
    </div>
    
    <div class="test-section">
        <h2>üìä Chart Loading Test</h2>
        <canvas id="test-chart"></canvas>
        <div id="chart-test"></div>
    </div>
    
    <div class="test-section">
        <h2>üîß Module Import Test</h2>
        <div id="module-test"></div>
    </div>

    <script type="module">
        // Test module imports
        async function testModules() {
            const moduleTest = document.getElementById('module-test');
            
            try {
                // Test importing from the new structure
                const { loadChartData } = await import('../src/js/charts.js');
                const { getPoliticalPeriod } = await import('../src/js/utils.js');
                const { CHART_CONFIG } = await import('../src/js/config.js');
                
                moduleTest.innerHTML = `
                    <div class="success">
                        ‚úÖ All modules imported successfully:<br>
                        - charts.js: loadChartData function<br>
                        - utils.js: getPoliticalPeriod function<br>
                        - config.js: CHART_CONFIG object
                    </div>
                `;
                
                // Test chart loading
                await testChartLoading();
                
            } catch (error) {
                moduleTest.innerHTML = `
                    <div class="error">
                        ‚ùå Module import failed: ${error.message}
                    </div>
                `;
            }
        }
        
        async function testChartLoading() {
            const chartTest = document.getElementById('chart-test');
            
            try {
                const { loadChartData } = await import('../src/js/charts.js');
                
                // Test loading a simple chart
                await loadChartData('test-chart', 'https://data.ssb.no/api/v0/dataset/1086.json?lang=en', 'Test Chart');
                
                chartTest.innerHTML = `
                    <div class="success">
                        ‚úÖ Chart loaded successfully from cached data
                    </div>
                `;
                
            } catch (error) {
                chartTest.innerHTML = `
                    <div class="error">
                        ‚ùå Chart loading failed: ${error.message}
                    </div>
                `;
            }
        }
        
        function testFileStructure() {
            const structureTest = document.getElementById('structure-test');
            
            const expectedFiles = [
                '../src/js/main.js',
                '../src/js/charts.js', 
                '../src/js/utils.js',
                '../src/js/config.js',
                '../src/css/main.css',
                '../src/html/index.html'
            ];
            
            let allFilesExist = true;
            let fileList = '<ul>';
            
            expectedFiles.forEach(file => {
                // This is a simple test - in a real scenario you'd use fetch to check
                fileList += `<li>${file}</li>`;
            });
            
            fileList += '</ul>';
            
            structureTest.innerHTML = `
                <div class="success">
                    ‚úÖ Expected file structure:<br>
                    ${fileList}
                </div>
            `;
        }
        
        // Run tests
        testFileStructure();
        testModules();
    </script>
</body>
</html>
